(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/useredit"],{"1b03":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e={data:function(){return{index:-1,switchC:!0,imgList:[],uploadUrl:"/sys/common/upload",myFormData:{avatar:"",realname:"",username:"",sex:1,birthday:"",orgCode:"",workNo:"",phone:"",email:"",id:""}}},onLoad:function(t){var a=this;console.log("this.$Route.query",this.$Route.query);var e=this.$Route.query;e&&(this.myFormData=e,"女"==this.myFormData.sex?this.switchC=!1:"男"==this.myFormData.sex&&(this.switchC=!0),this.myFormData.avatar&&(this.imgList=[this.myFormData.avatar]),this.myFormData.birthday||(this.myFormData.birthday="无"),"普通成员"==this.myFormData.identity?this.myFormData.identity=1:"上级"==this.myFormData.identity&&(this.myFormData.identity=2),"正常"==this.myFormData.status?this.myFormData.status=1:"冻结"==this.myFormData.status&&(this.myFormData.status=2),this.Avatar=this.myFormData.avatar,Object.keys(this.myFormData).map((function(t){"无"==a.myFormData[t]&&(a.myFormData[t]="")})),console.log("this.myFormData",this.myFormData))},methods:{onSubmit:function(){var t=this,a=this.myFormData,e=new RegExp(/^[1]([3-9])[0-9]{9}$/),i=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/;return console.log("myForm",a),a.phone&&0!=a.phone.length?e.test(a.phone)?i.test(a.email)?(this.myFormData.id=this.$store.getters.userid,this.switchC?this.myFormData.sex=1:this.myFormData.sex=2,console.log("myform",this.myFormData),this.$tip.loading(),void this.$http.put("/sys/user/appEdit",this.myFormData).then((function(a){console.log(a),t.$tip.loaded(),a.data.success&&(t.$tip.toast("提交成功"),t.$Router.replace({name:"userdetail"}))})).catch((function(){t.$tip.loaded(),t.$tip.error("提交失败")}))):(this.$tip.alert("请输入正确的邮箱地址"),!1):(this.$tip.alert("请输入正确的手机号"),!1):(this.$tip.alert("请输入手机号"),!1)},DateChange:function(t){this.myFormData.birthday=t.detail.value},SwitchC:function(t){this.switchC=t.detail.value},ChooseImage:function(){var a=this,e=this;t.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album"],success:function(t){e.$http.upload(e.$config.apiUrl+e.uploadUrl,{filePath:t.tempFilePaths[0],name:"file"}).then((function(t){e.myFormData.avatar=t.data.message})).catch((function(t){e.$tip.error(t.data.message)})),a.imgList=t.tempFilePaths}})},ViewImage:function(a){t.previewImage({urls:this.imgList,current:a.currentTarget.dataset.url})},DelImg:function(a){var e=this;t.showModal({title:"召唤师",content:"确定要删除这段回忆吗？",cancelText:"再看看",confirmText:"再见",success:function(t){t.confirm&&e.imgList.splice(a.currentTarget.dataset.index,1)}})}}};a.default=e}).call(this,e("543d")["default"])},2437:function(t,a,e){"use strict";(function(t){e("8d6c");i(e("66fd"));var a=i(e("6cec"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(a.default)}).call(this,e("543d")["createPage"])},"2b2e":function(t,a,e){"use strict";var i=e("95eb"),s=e.n(i);s.a},"418f":function(t,a,e){"use strict";var i;e.d(a,"b",(function(){return s})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return i}));var s=function(){var t=this,a=t.$createElement;t._self._c},o=[]},"42fe":function(t,a,e){"use strict";e.r(a);var i=e("1b03"),s=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a["default"]=s.a},"6cec":function(t,a,e){"use strict";e.r(a);var i=e("418f"),s=e("42fe");for(var o in s)"default"!==o&&function(t){e.d(a,t,(function(){return s[t]}))}(o);e("2b2e");var r,n=e("f0c5"),u=Object(n["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);a["default"]=u.exports},"95eb":function(t,a,e){}},[["2437","common/runtime","common/vendor"]]]);