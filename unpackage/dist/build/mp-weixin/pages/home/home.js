(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"17af":function(t,n,e){"use strict";var o;e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return o}));var a=function(){var t=this,n=t.$createElement,e=(t._self._c,t.__map(t.usList,(function(n,e){var o=t.__get_orig(n),a=t.getTtemDotInfo(n),i=a?t.getTtemDotInfo(n):null,u=a&&i?t.getTtemDotInfo(n):null;return{$orig:o,m0:a,m1:i,m2:u}})));t.$mp.data=Object.assign({},{$root:{l0:e}})},i=[]},"2e90":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("db42"),a=i(e("6159"));function i(t){return t&&t.__esModule?t:{default:t}}var u={name:"home",props:{cur:String},watch:{cur:{immediate:!0,handler:function(t,n){console.log("cur",t,n),this.initMenu()}}},data:function(){return{swiperList:[{id:1,type:"image",url:getApp().globalData.cdn+"/banner/banner1.png",link:"/pages/common/infoin"},{id:2,type:"image",url:getApp().globalData.cdn+"/banner/banner2.png",link:"/pages/common/helloWorld"},{id:3,type:"image",url:getApp().globalData.cdn+"/banner/banner3.png",link:"/pages/common/helloWorld"},{id:4,type:"image",url:getApp().globalData.cdn+"/banner/banner4.png",link:"/pages/common/helloWorld"}],middleApps:[{icon:"line2_icon1.png",title:"审批",text:"个人审批"},{icon:"line2_icon2.png",title:"审批稿",text:"审批草稿箱"}],usList:o.us.data,osList:o.os.data,msgCount:0,dot:{mailHome:!1}}},methods:{initMenu:function(){console.log("-----------home------------"),this.onSocketOpen(),this.onSocketReceive(),this.loadCount(0)},goPage:function(t){if(!t)return!1;"annotationList"===t&&(this.msgCount=0),this.dot[t]=!1,this.$Router.push({name:t})},onSocketOpen:function(){a.default.init("websocket")},onSocketReceive:function(){var t=this;a.default.acceptMessage=function(n){"topic"==n.cmd?t.loadCount("1"):"user"==n.cmd?t.loadCount("2"):"email"==n.cmd&&t.loadEmailCount()}},loadCount:function(t){var n=this;console.log("loadCount::flag",t);var e="/sys/annountCement/listByUser";this.$http.get(e).then((function(t){if(console.log("res::",t),t.data.success){var e=t.data.result.anntMsgTotal,o=t.data.result.sysMsgTotal;n.msgCount=e+o,console.log("this.msgCount",n.msgCount)}}))},loadEmailCount:function(){this.dot.mailHome=!0},getTtemDotInfo:function(t){return"annotationList"===t.page&&this.msgCount>0?this.msgCount:""},goDetail:function(n){t.navigateTo({url:n})}}};n.default=u}).call(this,e("543d")["default"])},3563:function(t,n,e){"use strict";var o=e("42cb"),a=e.n(o);a.a},"3e2f":function(t,n,e){"use strict";e.r(n);var o=e("2e90"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n["default"]=a.a},"42cb":function(t,n,e){},b8ab:function(t,n,e){"use strict";(function(t){e("8d6c");o(e("66fd"));var n=o(e("bbf8"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(n.default)}).call(this,e("543d")["createPage"])},bbf8:function(t,n,e){"use strict";e.r(n);var o=e("17af"),a=e("3e2f");for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);e("3563");var u,l=e("f0c5"),c=Object(l["a"])(a["default"],o["b"],o["c"],!1,null,"f8c2aab4",null,!1,o["a"],u);n["default"]=c.exports}},[["b8ab","common/runtime","common/vendor"]]]);